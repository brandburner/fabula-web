# Explicitly set Python provider and disable Django auto-detection
providers = ["python"]

[phases.setup]
nixPkgs = ["python311", "gcc"]

[phases.install]
cmds = ["pip install -r requirements.txt"]

# Empty build phase - no migrations or collectstatic during build
[phases.build]
cmds = []

[start]
cmd = "python manage.py migrate --noinput && python manage.py collectstatic --noinput && gunicorn fabula_web.wsgi"
