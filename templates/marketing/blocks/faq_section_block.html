{% load wagtailcore_tags %}

<section class="mb-12" x-data="{ openItem: null }">
    {% if self.section_title or self.category %}
    <h3 class="text-xl font-bold text-white mb-6">
        {{ self.section_title|default:self.category }}
    </h3>
    {% endif %}

    <div class="space-y-4">
        {% for item in self.items %}
        <div class="rounded-xl border border-slate-800 bg-slate-900/50 overflow-hidden">
            <button @click="openItem = openItem === {{ forloop.counter }} ? null : {{ forloop.counter }}"
                    class="w-full px-6 py-5 text-left flex items-center justify-between gap-4 hover:bg-slate-900/80 transition-colors">
                <span class="font-medium text-white">{{ item.question }}</span>
                <i data-lucide="chevron-down"
                   class="w-5 h-5 text-slate-500 transition-transform duration-200"
                   :class="{ 'rotate-180': openItem === {{ forloop.counter }} }"></i>
            </button>

            <div x-show="openItem === {{ forloop.counter }}"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 -translate-y-2"
                 x-transition:enter-end="opacity-100 translate-y-0"
                 x-transition:leave="transition ease-in duration-150"
                 x-transition:leave-start="opacity-100 translate-y-0"
                 x-transition:leave-end="opacity-0 -translate-y-2"
                 class="px-6 pb-5 prose prose-invert prose-slate max-w-none"
                 style="display: none;">
                {{ item.answer|richtext }}
            </div>
        </div>
        {% endfor %}
    </div>
</section>
